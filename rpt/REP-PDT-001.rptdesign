<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.eclipse.org/birt/2005/design" version="3.2.17" id="1">
    <property name="author">Enrique Giménez</property>
    <property name="createdBy">Eclipse BIRT Designer Version 2.3.2.r232_v20090521 Build &lt;@BUILD@></property>
    <property name="units">in</property>
    <simple-property-list name="includeResource">
        <value>diccionario</value>
    </simple-property-list>
    <property name="comments">***********************************************************************************
* EG 10/03/2010 (versión inicial): Se añade el parámetro pdecAlmCod (código interno almacén) con 
* respecto a la versión de SpeedWare, ya que desde un informe BIRT no es posible recuperar una 
* variable global de SpeedWare.
***********************************************************************************</property>
    <html-property name="description">***********************************************************************************
* NOMBRE:       
*       Informe de reposiciones pendientes.
*
* PARAMETROS RECIBIDOS:
*       1. pdecAlmCod                   -> Código interno almacén
*       2. pdecZonPicCod                -> Código interno zona de picking
***********************************************************************************</html-property>
    <property name="iconFile">/templates/blank_report.gif</property>
    <property name="layoutPreference">fixed layout</property>
    <property name="bidiLayoutOrientation">ltr</property>
    <parameters>
        <scalar-parameter name="pdecAlmCod" id="5796">
            <property name="valueType">static</property>
            <property name="dataType">decimal</property>
            <property name="paramType">simple</property>
            <text-property name="promptText" key="pdecAlmCod"></text-property>
            <property name="controlType">text-box</property>
            <property name="defaultValue">1</property>
            <property name="distinct">true</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="pdecZonPicCod" id="6314">
            <property name="valueType">static</property>
            <property name="dataType">decimal</property>
            <property name="paramType">simple</property>
            <text-property name="promptText" key="pdecZonPicCod"></text-property>
            <property name="controlType">text-box</property>
            <property name="defaultValue">2</property>
            <property name="distinct">true</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="strFecSys" id="6316">
            <property name="hidden">true</property>
            <property name="valueType">static</property>
            <property name="dataType">string</property>
            <property name="paramType">simple</property>
            <property name="concealValue">true</property>
            <property name="isRequired">false</property>
            <property name="controlType">text-box</property>
            <property name="distinct">true</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="strDetVis" id="6728">
            <property name="hidden">true</property>
            <property name="valueType">static</property>
            <property name="dataType">string</property>
            <property name="paramType">simple</property>
            <property name="concealValue">true</property>
            <property name="isRequired">false</property>
            <property name="controlType">text-box</property>
            <property name="distinct">true</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="decArtCodAnt" id="6719">
            <property name="hidden">true</property>
            <property name="valueType">static</property>
            <property name="dataType">decimal</property>
            <property name="paramType">simple</property>
            <property name="concealValue">true</property>
            <property name="isRequired">false</property>
            <property name="controlType">text-box</property>
            <property name="defaultValue">0</property>
            <property name="distinct">true</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="decCtdNecCnt_UniExp" id="6750">
            <property name="hidden">true</property>
            <property name="valueType">static</property>
            <property name="dataType">decimal</property>
            <property name="paramType">simple</property>
            <property name="concealValue">true</property>
            <property name="isRequired">false</property>
            <property name="controlType">text-box</property>
            <property name="defaultValue">0</property>
            <property name="distinct">true</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="decCtdNecCnt_UniMin" id="6751">
            <property name="hidden">true</property>
            <property name="valueType">static</property>
            <property name="dataType">decimal</property>
            <property name="paramType">simple</property>
            <property name="concealValue">true</property>
            <property name="isRequired">false</property>
            <property name="controlType">text-box</property>
            <property name="defaultValue">0</property>
            <property name="distinct">true</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="decCtdNecCnt" id="6749">
            <property name="hidden">true</property>
            <property name="valueType">static</property>
            <property name="dataType">decimal</property>
            <property name="paramType">simple</property>
            <property name="concealValue">true</property>
            <property name="isRequired">false</property>
            <property name="controlType">text-box</property>
            <property name="defaultValue">0</property>
            <property name="distinct">true</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="decCtdNecPed" id="6747">
            <property name="hidden">true</property>
            <property name="valueType">static</property>
            <property name="dataType">decimal</property>
            <property name="paramType">simple</property>
            <property name="concealValue">true</property>
            <property name="isRequired">false</property>
            <property name="controlType">text-box</property>
            <property name="defaultValue">0</property>
            <property name="distinct">true</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="decCtdNecMaxPik" id="6748">
            <property name="hidden">true</property>
            <property name="valueType">static</property>
            <property name="dataType">decimal</property>
            <property name="paramType">simple</property>
            <property name="concealValue">true</property>
            <property name="isRequired">false</property>
            <property name="controlType">text-box</property>
            <property name="defaultValue">0</property>
            <property name="distinct">true</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="decAcuRepArtCodAct" id="6718">
            <property name="hidden">true</property>
            <property name="valueType">static</property>
            <property name="dataType">decimal</property>
            <property name="paramType">simple</property>
            <property name="concealValue">true</property>
            <property name="isRequired">false</property>
            <property name="controlType">text-box</property>
            <property name="defaultValue">0</property>
            <property name="distinct">true</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
    </parameters>
    <data-sources>
        <oda-data-source extensionID="org.eclipse.birt.report.data.oda.jdbc" name="REP" id="411">
            <property name="odaDriverClass">oracle.jdbc.OracleDriver</property>
            <property name="odaURL">jdbc:oracle:thin:@172.20.10.51:1521:adaiasrv</property>
            <property name="odaUser">adaia3</property>
            <encrypted-property name="odaPassword" encryptionID="base64">YWRhaWEz</encrypted-property>
            <property name="odaJndiName">java:comp/env/jdbc/ADAIASRV</property>
        </oda-data-source>
    </data-sources>
    <data-sets>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="REP-PDT-001 01 (Ped)" id="6003">
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">ZONUBICOD</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">ZONUBIREF</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">ZONUBIDES</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">4</property>
                        <property name="name">ARTCOD</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">5</property>
                        <property name="name">SUM_CANPED</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">6</property>
                        <property name="name">SUM_CANUNI</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">7</property>
                        <property name="name">CANPICMAX</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">8</property>
                        <property name="name">SUM_CANACC</property>
                        <property name="dataType">decimal</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">REP</property>
            <list-property name="parameters">
                <structure>
                    <property name="name">p1</property>
                    <property name="paramName">pdecZonPicCod</property>
                    <property name="dataType">decimal</property>
                    <property name="position">1</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">p2</property>
                    <property name="paramName">pdecZonPicCod</property>
                    <property name="dataType">decimal</property>
                    <property name="position">2</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">p3</property>
                    <property name="paramName">pdecAlmCod</property>
                    <property name="dataType">decimal</property>
                    <property name="position">3</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">p4</property>
                    <property name="paramName">pdecZonPicCod</property>
                    <property name="dataType">decimal</property>
                    <property name="position">4</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <list-property name="resultSet">
                <structure>
                    <property name="position">1</property>
                    <property name="name">ZONUBICOD</property>
                    <property name="nativeName">ZONUBICOD</property>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">ZONUBIREF</property>
                    <property name="nativeName">ZONUBIREF</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">ZONUBIDES</property>
                    <property name="nativeName">ZONUBIDES</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">4</property>
                    <property name="name">ARTCOD</property>
                    <property name="nativeName">ARTCOD</property>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="position">5</property>
                    <property name="name">SUM_CANPED</property>
                    <property name="nativeName">SUM_CANPED</property>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="position">6</property>
                    <property name="name">SUM_CANUNI</property>
                    <property name="nativeName">SUM_CANUNI</property>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="position">7</property>
                    <property name="name">CANPICMAX</property>
                    <property name="nativeName">CANPICMAX</property>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="position">8</property>
                    <property name="name">SUM_CANACC</property>
                    <property name="nativeName">SUM_CANACC</property>
                    <property name="dataType">decimal</property>
                </structure>
            </list-property>
            <property name="queryText">SELECT   c.ZONUBICOD, 
         e.ZONUBIREF,
         e.ZONUBIDES,
         b.ARTCOD,  
         COALESCE(SUM(b.CANPED),0)                    AS SUM_CANPED,  
         COALESCE((SELECT SUM(r.CANUNI)
                   FROM   ARTALM p
                            INNER JOIN ALMUBI q
                               ON q.ALMUBICOD = p.UBIPIC
                            INNER JOIN CNTNDO r
                               ON r.CNTEXTCOD = q.CNTCOD
                   WHERE  p.ARTCOD    = b.ARTCOD
                     AND  p.ZONUBICOD = c.ZONUBICOD
                     AND  p.ZONPICCOD = ?),0)         AS SUM_CANUNI,  
         COALESCE((SELECT MAX(s.CANPICMAX)
                   FROM   ARTALM s
                   WHERE  s.ARTCOD    = b.ARTCOD
                     AND  s.ZONPICCOD = ?),0)         AS CANPICMAX,
         COALESCE((SELECT SUM(t.CAN)
                   FROM   ACCTRA t
                            INNER JOIN ALMUBI u
                               ON u.ALMCOD    = ?
                              AND u.ALMUBICOD = t.UBIORICOD
                   WHERE  t.ACCEST    &lt;> 'CO' 
                     AND  t.ACCTIPTAR =  'RE'
                     AND  t.ACCRELCOD =  0
                     AND  t.ARTCOD    =  b.ARTCOD),0) AS SUM_CANACC
FROM     EXPORDCAB a
           INNER JOIN EXPORDLIN b
              ON b.EXPORDCOD = a.EXPORDCOD
           INNER JOIN ARTALM c
              ON c.ARTCOD    = b.ARTCOD
             AND c.ALMCOD    = a.ALMCOD             
           INNER JOIN ALMUBI d
              ON d.ALMUBICOD = c.UBIPIC
           LEFT OUTER JOIN ALMZONUBI e
              ON e.ZONUBICOD = c.ZONUBICOD
WHERE    a.EXPORDSIT = 'PD'  
  AND    c.ZONPICCOD = ?  
GROUP BY c.ZONUBICOD,
         e.ZONUBIREF,
         e.ZONUBIDES, 
         b.ARTCOD   
ORDER BY c.ZONUBICOD</property>
        </oda-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="REP-PDT-001 02 (StkDis)" id="6181">
            <list-property name="columnHints">
                <structure>
                    <property name="columnName">ARTCOD</property>
                    <property name="displayName">ARTCOD</property>
                </structure>
                <structure>
                    <property name="columnName">ALMUBIALI</property>
                    <property name="displayName">ALMUBIALI</property>
                </structure>
                <structure>
                    <property name="columnName">ARTREF</property>
                    <property name="displayName">ARTREF</property>
                </structure>
                <structure>
                    <property name="columnName">ARTDES</property>
                    <property name="displayName">ARTDES</property>
                </structure>
                <structure>
                    <property name="columnName">UNIEXP</property>
                    <property name="displayName">UNIEXP</property>
                </structure>
                <structure>
                    <property name="columnName">UNIMIN</property>
                    <property name="displayName">UNIMIN</property>
                </structure>
                <structure>
                    <property name="columnName">NUMUNI_UNIEXP</property>
                    <property name="displayName">NUMUNI_UNIEXP</property>
                </structure>
                <structure>
                    <property name="columnName">CANUNI</property>
                    <property name="displayName">CANUNI</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">ARTCOD</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">ALMUBIALI</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">ARTREF</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">4</property>
                        <property name="name">ARTDES</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">5</property>
                        <property name="name">UNIEXP</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">6</property>
                        <property name="name">UNIMIN</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">7</property>
                        <property name="name">NUMUNI_UNIEXP</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">8</property>
                        <property name="name">CANUNI</property>
                        <property name="dataType">decimal</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">REP</property>
            <method name="beforeOpen"><![CDATA[//
// Construir fecha sistema en formato DD/MM/YYYY
//
//params["strFecSys"].value = new Date().getDate()       + "/" + 
//                           (new Date().getMonth() + 1) + "/" +
//                            new Date().getFullYear()
var decDia = new Date().getDate()
if ( decDia < 10 )
{
	var strDia = '0' + decDia
}
else
{
	var strDia = decDia.toString()
}
var decMes = new Date().getMonth() + 1
if ( decMes < 10 )
{
	var strMes = '0' + decMes
}
else
{
	var strMes = decMes.toString()
}
var strAny = new Date().getFullYear().toString()
params["strFecSys"].value = strDia +
                               "/" + 
                            strMes +
                               "/" + 
                            strAny
//
// *****************************
// * Añadir el WHERE al SELECT *
// *****************************
//
this.queryText = this.queryText + " " + "WHERE    a.EXPORDCOD =  0" +
                                  " " +   "AND    a.ASGRES    =  0" +
                                  " " +   "AND    c.ALMCOD    =" + " " + params["pdecAlmCod"].value +
                                  " " +   "AND    c.UBITIP    IN ('RE','CM')" +
                                  " " +   "AND    c.UBIEST    =  'LL'" +
                                  " " +   "AND    c.UBISIT    =  'OK'" +
                                  " " +   "AND  ((e.ROTTIP    =  'FC' AND" + 
                                  " " +          "a.FECCAD - e.DIAMINCADEXP >" + " " + 
                                  " " +          "LTR_TO_DATE('" + params["strFecSys"].value + 
                                  " " +                       "00:00:00'," +
                                  " " +                      "'DD/MM/YYYY HH24:MI:SS'))" + " " + "OR" +
                                  " " +          "e.ROTTIP    <> 'FC')"
//
// ********************************
// * Añadir el ORDER BY al SELECT *
// ********************************
//        
this.queryText = this.queryText + " " + "ORDER BY a.ARTCOD," +                          
                                  " " +          "a.CRIROT," + 
                                  " " +          "LLENOS(c.ESTCOD)," +
                                  " " +          "b.CNTCOM," +
                                  " " +          "DISTANCIA_PICREF(c.ALMCOD, c.ALMUBICOD, a.ARTCOD)"]]></method>
            <list-property name="resultSet">
                <structure>
                    <property name="position">1</property>
                    <property name="name">ARTCOD</property>
                    <property name="nativeName">ARTCOD</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">2</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">ALMUBIALI</property>
                    <property name="nativeName">ALMUBIALI</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">ARTREF</property>
                    <property name="nativeName">ARTREF</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">4</property>
                    <property name="name">ARTDES</property>
                    <property name="nativeName">ARTDES</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">5</property>
                    <property name="name">UNIEXP</property>
                    <property name="nativeName">UNIEXP</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">6</property>
                    <property name="name">UNIMIN</property>
                    <property name="nativeName">UNIMIN</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">7</property>
                    <property name="name">NUMUNI_UNIEXP</property>
                    <property name="nativeName">NUMUNI_UNIEXP</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">2</property>
                </structure>
                <structure>
                    <property name="position">8</property>
                    <property name="name">CANUNI</property>
                    <property name="nativeName">CANUNI</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">2</property>
                </structure>
            </list-property>
            <property name="queryText">SELECT   a.ARTCOD,
         d.ALMUBIALI,
         e.ARTREF,
         e.ARTDES,
         e.UNIEXP,
         e.UNIMIN,         
         f.NUMUNI AS NUMUNI_UNIEXP,
         a.CANUNI         
FROM     CNTNDO a
           INNER JOIN CNTDOR b
              ON b.CNTCOD    = a.CNTEXTCOD
           INNER JOIN ALMUBI c
              ON c.CNTCOD    = a.CNTEXTCOD
           LEFT OUTER JOIN ALMPRV d
              ON d.ALMUBICOD = c.ALMUBICOD 
           INNER JOIN ART e
              ON e.ARTCOD    = a.ARTCOD
           LEFT OUTER JOIN ARTPRE f
              ON f.ARTCOD    = a.ARTCOD
             AND f.UNITIP    = e.UNIEXP</property>
        </oda-data-set>
        <joint-data-set name="REP-PDT-001 03 (Join Ped-StkDis)" id="6432">
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">REP-PDT-001 01 (Ped)::ZONUBICOD</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">REP-PDT-001 01 (Ped)::ZONUBIREF</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">REP-PDT-001 01 (Ped)::ZONUBIDES</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">4</property>
                        <property name="name">REP-PDT-001 01 (Ped)::ARTCOD</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">5</property>
                        <property name="name">REP-PDT-001 01 (Ped)::SUM_CANPED</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">6</property>
                        <property name="name">REP-PDT-001 01 (Ped)::SUM_CANUNI</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">7</property>
                        <property name="name">REP-PDT-001 01 (Ped)::CANPICMAX</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">8</property>
                        <property name="name">REP-PDT-001 01 (Ped)::SUM_CANACC</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">9</property>
                        <property name="name">REP-PDT-001 02 (StkDis)::ARTCOD</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">10</property>
                        <property name="name">REP-PDT-001 02 (StkDis)::ALMUBIALI</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">11</property>
                        <property name="name">REP-PDT-001 02 (StkDis)::ARTREF</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">12</property>
                        <property name="name">REP-PDT-001 02 (StkDis)::ARTDES</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">13</property>
                        <property name="name">REP-PDT-001 02 (StkDis)::UNIEXP</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">14</property>
                        <property name="name">REP-PDT-001 02 (StkDis)::UNIMIN</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">15</property>
                        <property name="name">REP-PDT-001 02 (StkDis)::NUMUNI_UNIEXP</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">16</property>
                        <property name="name">REP-PDT-001 02 (StkDis)::CANUNI</property>
                        <property name="dataType">decimal</property>
                    </structure>
                </list-property>
            </structure>
            <list-property name="parameters">
                <structure>
                    <property name="name">REP-PDT-001 01 (Ped)::p1</property>
                    <property name="dataType">decimal</property>
                    <property name="position">1</property>
                    <property name="isOptional">false</property>
                    <property name="allowNull">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 01 (Ped)::p2</property>
                    <property name="dataType">decimal</property>
                    <property name="position">2</property>
                    <property name="isOptional">false</property>
                    <property name="allowNull">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 01 (Ped)::p3</property>
                    <property name="dataType">decimal</property>
                    <property name="position">3</property>
                    <property name="isOptional">false</property>
                    <property name="allowNull">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 01 (Ped)::p4</property>
                    <property name="dataType">decimal</property>
                    <property name="position">4</property>
                    <property name="isOptional">false</property>
                    <property name="allowNull">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <simple-property-list name="dataSets">
                <value>REP-PDT-001 01 (Ped)</value>
                <value>REP-PDT-001 02 (StkDis)</value>
            </simple-property-list>
            <list-property name="joinConditions">
                <structure>
                    <property name="joinType">inner</property>
                    <property name="joinOperator">eq</property>
                    <property name="leftDataSet">REP-PDT-001 01 (Ped)</property>
                    <property name="rightDataSet">REP-PDT-001 02 (StkDis)</property>
                    <expression name="leftExpression">dataSetRow["ARTCOD"]</expression>
                    <expression name="rightExpression">dataSetRow["ARTCOD"]</expression>
                </structure>
            </list-property>
        </joint-data-set>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="REP-PDT-001 04 (Cab)" id="6781">
            <list-property name="columnHints">
                <structure>
                    <property name="columnName">CLIENTE</property>
                    <property name="displayName">CLIENTE</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">CLIENTE</property>
                        <property name="dataType">string</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">REP</property>
            <list-property name="resultSet">
                <structure>
                    <property name="position">1</property>
                    <property name="name">CLIENTE</property>
                    <property name="nativeName">CLIENTE</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
            </list-property>
            <property name="queryText">select VALALF as CLIENTE
from GENPAR
where GENPARCOD = 'CLIENTE'
AND ALMCOD = 1
</property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>1.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:name>CLIENTE</design:name>
            <design:position>1</design:position>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>20</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>NotNullable</design:nullability>
            <design:uiHints>
              <design:displayName>CLIENTE</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>CLIENTE</design:label>
            <design:formattingHints>
              <design:displaySize>20</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>
]]></xml-property>
        </oda-data-set>
    </data-sets>
    <styles>
        <style name="report" id="4">
            <property name="fontFamily">"Verdana"</property>
            <property name="fontSize">10pt</property>
            <property name="textAlign">center</property>
            <property name="verticalAlign">middle</property>
            <property name="whiteSpace">nowrap</property>
        </style>
    </styles>
    <page-setup>
        <simple-master-page name="Simple MasterPage" id="2">
            <property name="orientation">landscape</property>
            <property name="topMargin">0.5104166666666666in</property>
            <property name="leftMargin">0.25in</property>
            <property name="bottomMargin">0.25in</property>
            <property name="rightMargin">0.25in</property>
            <page-header>
                <grid id="75">
                    <property name="borderBottomColor">#000000</property>
                    <property name="borderBottomStyle">solid</property>
                    <property name="borderBottomWidth">medium</property>
                    <property name="borderTopColor">#000000</property>
                    <property name="borderTopStyle">solid</property>
                    <property name="borderTopWidth">medium</property>
                    <property name="width">100%</property>
                    <list-property name="boundDataColumns">
                        <structure>
                            <property name="name">Fecha</property>
                            <property name="displayName">Fecha</property>
                            <expression name="expression">BirtDateTime.now()</expression>
                            <property name="dataType">date-time</property>
                        </structure>
                    </list-property>
                    <column id="76">
                        <property name="width">2.0520833333333335in</property>
                    </column>
                    <column id="77">
                        <property name="width">4in</property>
                    </column>
                    <column id="78">
                        <property name="width">1.84375in</property>
                    </column>
                    <row id="144">
                        <cell id="145"/>
                        <cell id="146"/>
                        <cell id="147">
                            <property name="textAlign">right</property>
                            <image id="1472">
                                <property name="height">71px</property>
                                <property name="width">136px</property>
                                <property name="source">file</property>
                                <expression name="uri">"cliente.png"</expression>
                            </image>
                        </cell>
                    </row>
                    <row id="1689">
                        <cell id="1690">
                            <label id="1687">
                                <property name="fontFamily">"Garamond"</property>
                                <property name="fontSize">12pt</property>
                                <property name="fontWeight">bold</property>
                                <property name="textAlign">left</property>
                                <text-property name="text">ADAIA</text-property>
                            </label>
                        </cell>
                        <cell id="1691"/>
                        <cell id="1692">
                            <data id="94">
                                <structure name="dateTimeFormat">
                                    <property name="category">General Date</property>
                                    <property name="pattern">General Date</property>
                                </structure>
                                <structure name="numberFormat">
                                    <property name="category">Custom</property>
                                </structure>
                                <property name="textAlign">right</property>
                                <property name="resultSetColumn">Fecha</property>
                            </data>
                        </cell>
                    </row>
                    <row id="83">
                        <cell id="84"/>
                        <cell id="85">
                            <label id="92">
                                <property name="fontWeight">bold</property>
                                <property name="textUnderline">underline</property>
                                <property name="marginTop">0pt</property>
                                <property name="textAlign">center</property>
                                <text-property name="text" key="InformeDeReposicionesPendientes"></text-property>
                            </label>
                        </cell>
                        <cell id="86"/>
                    </row>
                    <row id="87">
                        <cell id="88">
                            <data id="6782">
                                <property name="textAlign">left</property>
                                <property name="dataSet">REP-PDT-001 04 (Cab)</property>
                                <list-property name="boundDataColumns">
                                    <structure>
                                        <property name="name">CLIENTE</property>
                                        <expression name="expression">dataSetRow["CLIENTE"]</expression>
                                        <property name="dataType">string</property>
                                    </structure>
                                </list-property>
                                <property name="resultSetColumn">CLIENTE</property>
                            </data>
                        </cell>
                        <cell id="89"/>
                        <cell id="90">
                            <label id="95">
                                <property name="textAlign">right</property>
                                <text-property name="text">(REP-PDT-001)</text-property>
                            </label>
                        </cell>
                    </row>
                </grid>
            </page-header>
            <page-footer>
                <grid id="230">
                    <property name="width">7.875in</property>
                    <column id="242">
                        <property name="width">5.760416666666667in</property>
                    </column>
                    <column id="231">
                        <property name="width">1.0520833333333333in</property>
                    </column>
                    <column id="232">
                        <property name="width">0.19791666666666666in</property>
                    </column>
                    <column id="233">
                        <property name="width">0.8645833333333334in</property>
                    </column>
                    <row id="234">
                        <cell id="241"/>
                        <cell id="235">
                            <auto-text id="236">
                                <property name="textAlign">right</property>
                                <property name="type">page-number</property>
                            </auto-text>
                        </cell>
                        <cell id="237">
                            <text id="238">
                                <property name="textAlign">center</property>
                                <property name="contentType">plain</property>
                                <text-property name="content"><![CDATA[/]]></text-property>
                            </text>
                        </cell>
                        <cell id="239">
                            <auto-text id="240">
                                <property name="textAlign">right</property>
                                <property name="type">total-page</property>
                            </auto-text>
                        </cell>
                    </row>
                </grid>
            </page-footer>
        </simple-master-page>
    </page-setup>
    <body>
        <table id="6433">
            <property name="marginTop">0pt</property>
            <property name="width">60%</property>
            <property name="dataSet">REP-PDT-001 03 (Join Ped-StkDis)</property>
            <list-property name="boundDataColumns">
                <structure>
                    <property name="name">REP-PDT-001 01 (Ped)::ZONUBICOD</property>
                    <property name="displayName">REP-PDT-001 01 (Ped)::ZONUBICOD</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 01 (Ped)::ZONUBICOD"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 01 (Ped)::ZONUBIREF</property>
                    <property name="displayName">REP-PDT-001 01 (Ped)::ZONUBIREF</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 01 (Ped)::ZONUBIREF"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 01 (Ped)::ZONUBIDES</property>
                    <property name="displayName">REP-PDT-001 01 (Ped)::ZONUBIDES</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 01 (Ped)::ZONUBIDES"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 01 (Ped)::ARTCOD</property>
                    <property name="displayName">REP-PDT-001 01 (Ped)::ARTCOD</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 01 (Ped)::ARTCOD"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 01 (Ped)::SUM_CANPED</property>
                    <property name="displayName">REP-PDT-001 01 (Ped)::SUM_CANPED</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 01 (Ped)::SUM_CANPED"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 01 (Ped)::SUM_CANUNI</property>
                    <property name="displayName">REP-PDT-001 01 (Ped)::SUM_CANUNI</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 01 (Ped)::SUM_CANUNI"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 01 (Ped)::CANPICMAX</property>
                    <property name="displayName">REP-PDT-001 01 (Ped)::CANPICMAX</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 01 (Ped)::CANPICMAX"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 01 (Ped)::SUM_CANACC</property>
                    <property name="displayName">REP-PDT-001 01 (Ped)::SUM_CANACC</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 01 (Ped)::SUM_CANACC"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 02 (StkDis)::ARTCOD</property>
                    <property name="displayName">REP-PDT-001 02 (StkDis)::ARTCOD</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 02 (StkDis)::ARTCOD"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 02 (StkDis)::ALMUBIALI</property>
                    <property name="displayName">REP-PDT-001 02 (StkDis)::ALMUBIALI</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 02 (StkDis)::ALMUBIALI"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 02 (StkDis)::ARTREF</property>
                    <property name="displayName">REP-PDT-001 02 (StkDis)::ARTREF</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 02 (StkDis)::ARTREF"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 02 (StkDis)::ARTDES</property>
                    <property name="displayName">REP-PDT-001 02 (StkDis)::ARTDES</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 02 (StkDis)::ARTDES"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 02 (StkDis)::UNIEXP</property>
                    <property name="displayName">REP-PDT-001 02 (StkDis)::UNIEXP</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 02 (StkDis)::UNIEXP"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 02 (StkDis)::UNIMIN</property>
                    <property name="displayName">REP-PDT-001 02 (StkDis)::UNIMIN</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 02 (StkDis)::UNIMIN"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 02 (StkDis)::NUMUNI_UNIEXP</property>
                    <property name="displayName">REP-PDT-001 02 (StkDis)::NUMUNI_UNIEXP</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 02 (StkDis)::NUMUNI_UNIEXP"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">REP-PDT-001 02 (StkDis)::CANUNI</property>
                    <property name="displayName">REP-PDT-001 02 (StkDis)::CANUNI</property>
                    <expression name="expression">dataSetRow["REP-PDT-001 02 (StkDis)::CANUNI"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
            </list-property>
            <list-property name="filter">
                <structure>
                    <property name="operator">gt</property>
                    <expression name="expr">row["REP-PDT-001 01 (Ped)::SUM_CANPED"] -
( row["REP-PDT-001 01 (Ped)::SUM_CANUNI"] - row["REP-PDT-001 01 (Ped)::SUM_CANACC"] )</expression>
                    <simple-property-list name="value1">
                        <value>0</value>
                    </simple-property-list>
                </structure>
            </list-property>
            <column id="6514">
                <property name="width">35mm</property>
            </column>
            <column id="6515">
                <property name="width">25mm</property>
            </column>
            <column id="6516">
                <property name="width">80mm</property>
            </column>
            <column id="6584">
                <property name="width">10mm</property>
            </column>
            <column id="6517">
                <property name="width">8mm</property>
            </column>
            <column id="6579">
                <property name="width">4mm</property>
            </column>
            <column id="6518">
                <property name="width">10mm</property>
            </column>
            <column id="6519">
                <property name="width">8mm</property>
            </column>
            <column id="6520">
                <property name="width">15mm</property>
            </column>
            <column id="6735">
                <property name="width">30mm</property>
            </column>
            <header>
                <row id="6603">
                    <property name="height">0.312in</property>
                    <cell id="6604"/>
                    <cell id="6605"/>
                    <cell id="6606"/>
                    <cell id="6607"/>
                    <cell id="6608"/>
                    <cell id="6609"/>
                    <cell id="6610"/>
                    <cell id="6611"/>
                    <cell id="6612"/>
                    <cell id="6729"/>
                </row>
            </header>
            <group id="6647">
                <property name="groupName">ZONUBICOD</property>
                <property name="interval">none</property>
                <property name="sortDirection">asc</property>
                <expression name="keyExpr">row["REP-PDT-001 01 (Ped)::ZONUBICOD"]</expression>
                <structure name="toc">
                    <expression name="expressionValue">row["REP-PDT-001 01 (Ped)::ZONUBICOD"]</expression>
                </structure>
                <property name="repeatHeader">true</property>
                <property name="hideDetail">false</property>
                <property name="pageBreakAfter">auto</property>
                <property name="pageBreakBefore">always-excluding-first</property>
                <property name="pageBreakInside">auto</property>
                <header>
                    <row id="6648">
                        <cell id="6649">
                            <property name="colSpan">3</property>
                            <property name="rowSpan">1</property>
                            <grid id="6758">
                                <property name="width">100%</property>
                                <column id="6759">
                                    <property name="width">50mm</property>
                                </column>
                                <column id="6760">
                                    <property name="width">20mm</property>
                                </column>
                                <column id="6761">
                                    <property name="width">70mm</property>
                                </column>
                                <row id="6762">
                                    <cell id="6763">
                                        <label id="6623">
                                            <property name="fontWeight">bold</property>
                                            <property name="color">#800000</property>
                                            <property name="borderTopColor">#800000</property>
                                            <property name="borderTopStyle">dotted</property>
                                            <property name="borderTopWidth">1px</property>
                                            <property name="textAlign">left</property>
                                            <text-property name="text" key="ZonaAlmacenaje"></text-property>
                                        </label>
                                    </cell>
                                    <cell id="6764">
                                        <data id="6768">
                                            <property name="color">#800000</property>
                                            <property name="borderTopColor">#800000</property>
                                            <property name="borderTopStyle">dotted</property>
                                            <property name="borderTopWidth">1px</property>
                                            <property name="resultSetColumn">REP-PDT-001 01 (Ped)::ZONUBIREF</property>
                                        </data>
                                    </cell>
                                    <cell id="6765">
                                        <data id="6769">
                                            <property name="color">#800000</property>
                                            <property name="borderTopColor">#800000</property>
                                            <property name="borderTopStyle">dotted</property>
                                            <property name="borderTopWidth">1px</property>
                                            <property name="textAlign">left</property>
                                            <property name="resultSetColumn">REP-PDT-001 01 (Ped)::ZONUBIDES</property>
                                        </data>
                                    </cell>
                                </row>
                            </grid>
                        </cell>
                        <cell id="6652">
                            <property name="colSpan">1</property>
                            <property name="rowSpan">1</property>
                        </cell>
                        <cell id="6694"/>
                        <cell id="6695"/>
                        <cell id="6696"/>
                        <cell id="6697"/>
                        <cell id="6698"/>
                        <cell id="6730"/>
                    </row>
                    <row id="6669">
                        <property name="height">0.2in</property>
                        <cell id="6670"/>
                        <cell id="6671"/>
                        <cell id="6672"/>
                        <cell id="6673"/>
                        <cell id="6674"/>
                        <cell id="6675"/>
                        <cell id="6676"/>
                        <cell id="6677"/>
                        <cell id="6678"/>
                        <cell id="6731"/>
                    </row>
                    <row id="6679">
                        <property name="verticalAlign">bottom</property>
                        <cell id="6680">
                            <label id="6597">
                                <property name="fontWeight">bold</property>
                                <property name="borderBottomColor">#000000</property>
                                <property name="borderBottomStyle">solid</property>
                                <property name="borderBottomWidth">thin</property>
                                <property name="marginTop">0pt</property>
                                <text-property name="text" key="Ubicacion"></text-property>
                            </label>
                        </cell>
                        <cell id="6681">
                            <label id="6599">
                                <property name="fontWeight">bold</property>
                                <property name="borderBottomColor">#000000</property>
                                <property name="borderBottomStyle">solid</property>
                                <property name="borderBottomWidth">thin</property>
                                <property name="marginTop">0pt</property>
                                <property name="marginLeft">4pt</property>
                                <text-property name="text" key="Articulo"></text-property>
                            </label>
                        </cell>
                        <cell id="6682">
                            <label id="6600">
                                <property name="fontWeight">bold</property>
                                <property name="borderBottomColor">#000000</property>
                                <property name="borderBottomStyle">solid</property>
                                <property name="borderBottomWidth">thin</property>
                                <property name="marginTop">0pt</property>
                                <property name="marginLeft">4pt</property>
                                <text-property name="text" key="Descripcion"></text-property>
                            </label>
                        </cell>
                        <cell id="6683">
                            <property name="colSpan">5</property>
                            <property name="rowSpan">1</property>
                            <label id="6601">
                                <property name="fontWeight">bold</property>
                                <property name="borderBottomColor">#000000</property>
                                <property name="borderBottomStyle">solid</property>
                                <property name="borderBottomWidth">thin</property>
                                <property name="marginTop">0pt</property>
                                <property name="marginLeft">4pt</property>
                                <text-property name="text" key="Cantidad"></text-property>
                            </label>
                        </cell>
                        <cell id="6688">
                            <label id="6602">
                                <property name="fontWeight">bold</property>
                                <property name="borderBottomColor">#000000</property>
                                <property name="borderBottomStyle">solid</property>
                                <property name="borderBottomWidth">thin</property>
                                <property name="marginTop">0pt</property>
                                <property name="marginLeft">4pt</property>
                                <text-property name="text" key="TotalUdsMin"></text-property>
                            </label>
                        </cell>
                        <cell id="6732">
                            <label id="6757">
                                <property name="fontWeight">bold</property>
                                <property name="borderBottomColor">#000000</property>
                                <property name="borderBottomStyle">solid</property>
                                <property name="borderBottomWidth">thin</property>
                                <property name="marginTop">0pt</property>
                                <property name="marginLeft">4pt</property>
                                <property name="textAlign">center</property>
                                <text-property name="text" key="Reposicion?"></text-property>
                            </label>
                        </cell>
                    </row>
                </header>
                <footer>
                    <row id="6658">
                        <property name="height">0.312in</property>
                        <cell id="6659"/>
                        <cell id="6660"/>
                        <cell id="6661"/>
                        <cell id="6662"/>
                        <cell id="6663"/>
                        <cell id="6664"/>
                        <cell id="6665"/>
                        <cell id="6666"/>
                        <cell id="6667"/>
                        <cell id="6734"/>
                    </row>
                </footer>
            </group>
            <detail>
                <row id="6463">
                    <method name="onCreate"><![CDATA[//
// Gestionar la ctd. nec. contenedor en un parámetro,
// para poder cambiar su valor cuando proceda 
params["decCtdNecCnt"].value = row["REP-PDT-001 02 (StkDis)::CANUNI"]
//
// Determinar reposiciones necesarias para cubrir el acum.de ctd.pedida de 
// las órdenes de expedición en sit. PD
params["decCtdNecPed"].value = row["REP-PDT-001 01 (Ped)::SUM_CANPED"] -
                             ( row["REP-PDT-001 01 (Ped)::SUM_CANUNI"] - row["REP-PDT-001 01 (Ped)::SUM_CANACC"] )
//
// Determinar reposiciones necesarias para cubrir la ctd. máxima de 
// picking definida en la ficha del artículo en curso
params["decCtdNecMaxPik"].value = row["REP-PDT-001 01 (Ped)::CANPICMAX"] -
                                ( row["REP-PDT-001 01 (Ped)::SUM_CANUNI"] - row["REP-PDT-001 01 (Ped)::SUM_CANACC"] ) 
//
// Si existe ruptura de ArtCod ==>
//   La fila de detalle en curso será visible en el informe
//   Init ctd. acum. de reposiciones
if ( row["REP-PDT-001 01 (Ped)::ARTCOD"] != params["decArtCodAnt"].value )
{
	params["strDetVis"].value = 'X'
	params["decAcuRepArtCodAct"].value = 0
}
//
// Si no existe ruptura de ArtCod y ya se llegó 
// al límite de reposiciones en el reg. anterior ==>
//   La fila de detalle en curso no será visible en el informe    
if ( row["REP-PDT-001 01 (Ped)::ARTCOD"] == params["decArtCodAnt"].value
                &amp;&amp;
	 params["decAcuRepArtCodAct"].value >= params["decCtdNecPed"].value
                &amp;&amp;
     params["decAcuRepArtCodAct"].value >= params["decCtdNecMaxPik"].value )  
{
	params["strDetVis"].value = null
}
//
// En caso contrario ==>
else
{
//
//  Acum. ctd. contenedor en curso a ctd. nec. reposiciones
	params["decAcuRepArtCodAct"].value = params["decAcuRepArtCodAct"].value + params["decCtdNecCnt"].value
//
//  Si el acum. ctd. nec. reposiciones ha llegado al límite
//  de la ctd. nec. pedidos y de la ctd. máxima picking ==>
//    Ajustar ctd. nec. reposición del contenedor al límite más alto 
//    entre la ctd. nec. pedidos y la ctd. máxima picking
	if ( params["decAcuRepArtCodAct"].value >= params["decCtdNecPed"].value
                        &amp;&amp;
	     params["decAcuRepArtCodAct"].value >= params["decCtdNecMaxPik"].value )           
	{
		if ( params["decCtdNecPed"].value > params["decCtdNecMaxPik"].value )
        {
			params["decCtdNecCnt"].value = params["decCtdNecCnt"].value - 
										 ( params["decAcuRepArtCodAct"].value - params["decCtdNecPed"].value )                      
		}
		else
		{
			params["decCtdNecCnt"].value = params["decCtdNecCnt"].value - 
										 ( params["decAcuRepArtCodAct"].value - params["decCtdNecMaxPik"].value )
		}
	}
}
//
// Preparación para las funciones 
// BirtMath.roundDown y BirtMath.mod
var x = ( params["decCtdNecCnt"].value )
if ( x < 0 )
{
	var y = -1
}
else
{
	var y = 1
}
//
// Determinar la ctd. nec. contenedor en uds. exp.
if ( row["REP-PDT-001 02 (StkDis)::NUMUNI_UNIEXP"] != null 
         &amp;&amp;
     row["REP-PDT-001 02 (StkDis)::NUMUNI_UNIEXP"] != 0 )
{
	params["decCtdNecCnt_UniExp"].value = 
	        BirtMath.roundDown( ( ( x * y ) / row["REP-PDT-001 02 (StkDis)::NUMUNI_UNIEXP"] ), 0 ) * y
}
else
{
	params["decCtdNecCnt_UniExp"].value = 0
}
//
// Determinar la ctd. nec. contenedor restante en uds. mín.
if ( row["REP-PDT-001 02 (StkDis)::NUMUNI_UNIEXP"] != null 
         &amp;&amp;
     row["REP-PDT-001 02 (StkDis)::NUMUNI_UNIEXP"] != 0 )
{
	params["decCtdNecCnt_UniMin"].value = 
	        BirtMath.mod( ( x * y ), row["REP-PDT-001 02 (StkDis)::NUMUNI_UNIEXP"] ) * y
}
else
{
	params["decCtdNecCnt_UniMin"].value = params["decCtdNecCnt"].value
}
//
// Preparación próxima ruptura de ArtCod
params["decArtCodAnt"].value = row["REP-PDT-001 02 (StkDis)::ARTCOD"]]]></method>
                    <cell id="6478">
                        <data id="6776">
                            <property name="marginTop">0pt</property>
                            <property name="textAlign">left</property>
                            <property name="resultSetColumn">REP-PDT-001 02 (StkDis)::ALMUBIALI</property>
                        </data>
                    </cell>
                    <cell id="6480">
                        <data id="6777">
                            <property name="marginTop">0pt</property>
                            <property name="marginLeft">4pt</property>
                            <property name="textAlign">left</property>
                            <property name="resultSetColumn">REP-PDT-001 02 (StkDis)::ARTREF</property>
                        </data>
                    </cell>
                    <cell id="6482">
                        <data id="6778">
                            <property name="marginTop">0pt</property>
                            <property name="marginLeft">4pt</property>
                            <property name="textAlign">left</property>
                            <property name="resultSetColumn">REP-PDT-001 02 (StkDis)::ARTDES</property>
                        </data>
                    </cell>
                    <cell id="6582">
                        <data id="6752">
                            <property name="marginLeft">4pt</property>
                            <structure name="numberFormat">
                                <property name="category">Fixed</property>
                                <property name="pattern">#,##0</property>
                            </structure>
                            <property name="textAlign">right</property>
                            <list-property name="boundDataColumns">
                                <structure>
                                    <property name="name">decCtdNecCnt_UniExp</property>
                                    <expression name="expression">params["decCtdNecCnt_UniExp"].value</expression>
                                    <property name="dataType">decimal</property>
                                </structure>
                            </list-property>
                            <property name="resultSetColumn">decCtdNecCnt_UniExp</property>
                        </data>
                    </cell>
                    <cell id="6484">
                        <data id="6779">
                            <property name="textAlign">left</property>
                            <property name="resultSetColumn">REP-PDT-001 02 (StkDis)::UNIEXP</property>
                        </data>
                    </cell>
                    <cell id="6577">
                        <label id="6580">
                            <text-property name="text" key="+"></text-property>
                        </label>
                    </cell>
                    <cell id="6486">
                        <data id="6753">
                            <structure name="numberFormat">
                                <property name="category">Fixed</property>
                                <property name="pattern">#,##0</property>
                            </structure>
                            <property name="textAlign">right</property>
                            <list-property name="boundDataColumns">
                                <structure>
                                    <property name="name">decCtdNecCnt_UniMin</property>
                                    <expression name="expression">params["decCtdNecCnt_UniMin"].value</expression>
                                    <property name="dataType">decimal</property>
                                </structure>
                            </list-property>
                            <property name="resultSetColumn">decCtdNecCnt_UniMin</property>
                        </data>
                    </cell>
                    <cell id="6488">
                        <data id="6780">
                            <property name="textAlign">left</property>
                            <property name="resultSetColumn">REP-PDT-001 02 (StkDis)::UNIMIN</property>
                        </data>
                    </cell>
                    <cell id="6490">
                        <data id="6754">
                            <property name="marginLeft">4pt</property>
                            <structure name="numberFormat">
                                <property name="category">Fixed</property>
                                <property name="pattern">#,##0</property>
                            </structure>
                            <property name="textAlign">right</property>
                            <list-property name="boundDataColumns">
                                <structure>
                                    <property name="name">decCtdNecCnt</property>
                                    <expression name="expression">params["decCtdNecCnt"].value</expression>
                                    <property name="dataType">decimal</property>
                                </structure>
                            </list-property>
                            <property name="resultSetColumn">decCtdNecCnt</property>
                        </data>
                    </cell>
                    <cell id="6733">
                        <data id="6755">
                            <property name="marginLeft">4pt</property>
                            <list-property name="highlightRules">
                                <structure>
                                    <property name="operator">is-null</property>
                                    <property name="color">#008000</property>
                                    <expression name="testExpr">row["strDetVis"]</expression>
                                </structure>
                                <structure>
                                    <property name="operator">is-not-null</property>
                                    <property name="color">#FF0000</property>
                                    <expression name="testExpr">row["strDetVis"]</expression>
                                </structure>
                            </list-property>
                            <list-property name="mapRules">
                                <structure>
                                    <expression name="testExpr">row["strDetVis"]</expression>
                                    <property name="operator">is-null</property>
                                    <text-property name="display" key="No">No</text-property>
                                </structure>
                                <structure>
                                    <expression name="testExpr">row["strDetVis"]</expression>
                                    <property name="operator">is-not-null</property>
                                    <text-property name="display" key="Si">Si</text-property>
                                </structure>
                            </list-property>
                            <list-property name="boundDataColumns">
                                <structure>
                                    <property name="name">strDetVis</property>
                                    <expression name="expression">params["strDetVis"].value</expression>
                                    <property name="dataType">string</property>
                                </structure>
                            </list-property>
                            <property name="resultSetColumn">strDetVis</property>
                        </data>
                    </cell>
                </row>
            </detail>
        </table>
    </body>
</report>
